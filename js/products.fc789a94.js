(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["products"],{"057f":function(t,e,r){var i=r("fc6a"),n=r("241c").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return n(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?c(t):n(i(t))}},"1dde":function(t,e,r){var i=r("d039"),n=r("b622"),o=r("2d00"),a=n("species");t.exports=function(t){return o>=51||!i((function(){var e=[],r=e.constructor={};return r[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},2532:function(t,e,r){"use strict";var i=r("23e7"),n=r("5a34"),o=r("1d80"),a=r("ab13");i({target:"String",proto:!0,forced:!a("includes")},{includes:function(t){return!!~String(o(this)).indexOf(n(t),arguments.length>1?arguments[1]:void 0)}})},"44e7":function(t,e,r){var i=r("861d"),n=r("c6b6"),o=r("b622"),a=o("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==n(t))}},"5a34":function(t,e,r){var i=r("44e7");t.exports=function(t){if(i(t))throw TypeError("The method doesn't accept regular expressions");return t}},"65f0":function(t,e,r){var i=r("861d"),n=r("e8b5"),o=r("b622"),a=o("species");t.exports=function(t,e){var r;return n(t)&&(r=t.constructor,"function"!=typeof r||r!==Array&&!n(r.prototype)?i(r)&&(r=r[a],null===r&&(r=void 0)):r=void 0),new(void 0===r?Array:r)(0===e?0:e)}},"746f":function(t,e,r){var i=r("428f"),n=r("5135"),o=r("e538"),a=r("9bf2").f;t.exports=function(t){var e=i.Symbol||(i.Symbol={});n(e,t)||a(e,t,{value:o.f(t)})}},8418:function(t,e,r){"use strict";var i=r("c04e"),n=r("9bf2"),o=r("5c6c");t.exports=function(t,e,r){var a=i(e);a in t?n.f(t,a,o(0,r)):t[a]=r}},a434:function(t,e,r){"use strict";var i=r("23e7"),n=r("23cb"),o=r("a691"),a=r("50c4"),c=r("7b0b"),s=r("65f0"),d=r("8418"),u=r("1dde"),l=r("ae40"),p=u("splice"),f=l("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,b=Math.min,h=9007199254740991,v="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!p||!f},{splice:function(t,e){var r,i,u,l,p,f,g=c(this),y=a(g.length),E=n(t,y),S=arguments.length;if(0===S?r=i=0:1===S?(r=0,i=y-E):(r=S-2,i=b(m(o(e),0),y-E)),y+r-i>h)throw TypeError(v);for(u=s(g,i),l=0;l<i;l++)p=E+l,p in g&&d(u,l,g[p]);if(u.length=i,r<i){for(l=E;l<y-i;l++)p=l+i,f=l+r,p in g?g[f]=g[p]:delete g[f];for(l=y;l>y-i+r;l--)delete g[l-1]}else if(r>i)for(l=y-i;l>E;l--)p=l+i-1,f=l+r-1,p in g?g[f]=g[p]:delete g[f];for(l=0;l<r;l++)g[l+E]=arguments[l+2];return g.length=y-i+r,u}})},a4d3:function(t,e,r){"use strict";var i=r("23e7"),n=r("da84"),o=r("d066"),a=r("c430"),c=r("83ab"),s=r("4930"),d=r("fdbf"),u=r("d039"),l=r("5135"),p=r("e8b5"),f=r("861d"),m=r("825a"),b=r("7b0b"),h=r("fc6a"),v=r("c04e"),g=r("5c6c"),y=r("7c73"),E=r("df75"),S=r("241c"),x=r("057f"),w=r("7418"),P=r("06cf"),k=r("9bf2"),_=r("d1e7"),O=r("9112"),$=r("6eeb"),A=r("5692"),j=r("f772"),C=r("d012"),T=r("90e3"),N=r("b622"),R=r("e538"),D=r("746f"),J=r("d44e"),z=r("69f3"),F=r("b727").forEach,I=j("hidden"),M="Symbol",B="prototype",Q=N("toPrimitive"),W=z.set,q=z.getterFor(M),G=Object[B],H=n.Symbol,K=o("JSON","stringify"),L=P.f,U=k.f,V=x.f,X=_.f,Y=A("symbols"),Z=A("op-symbols"),tt=A("string-to-symbol-registry"),et=A("symbol-to-string-registry"),rt=A("wks"),it=n.QObject,nt=!it||!it[B]||!it[B].findChild,ot=c&&u((function(){return 7!=y(U({},"a",{get:function(){return U(this,"a",{value:7}).a}})).a}))?function(t,e,r){var i=L(G,e);i&&delete G[e],U(t,e,r),i&&t!==G&&U(G,e,i)}:U,at=function(t,e){var r=Y[t]=y(H[B]);return W(r,{type:M,tag:t,description:e}),c||(r.description=e),r},ct=d?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof H},st=function(t,e,r){t===G&&st(Z,e,r),m(t);var i=v(e,!0);return m(r),l(Y,i)?(r.enumerable?(l(t,I)&&t[I][i]&&(t[I][i]=!1),r=y(r,{enumerable:g(0,!1)})):(l(t,I)||U(t,I,g(1,{})),t[I][i]=!0),ot(t,i,r)):U(t,i,r)},dt=function(t,e){m(t);var r=h(e),i=E(r).concat(mt(r));return F(i,(function(e){c&&!lt.call(r,e)||st(t,e,r[e])})),t},ut=function(t,e){return void 0===e?y(t):dt(y(t),e)},lt=function(t){var e=v(t,!0),r=X.call(this,e);return!(this===G&&l(Y,e)&&!l(Z,e))&&(!(r||!l(this,e)||!l(Y,e)||l(this,I)&&this[I][e])||r)},pt=function(t,e){var r=h(t),i=v(e,!0);if(r!==G||!l(Y,i)||l(Z,i)){var n=L(r,i);return!n||!l(Y,i)||l(r,I)&&r[I][i]||(n.enumerable=!0),n}},ft=function(t){var e=V(h(t)),r=[];return F(e,(function(t){l(Y,t)||l(C,t)||r.push(t)})),r},mt=function(t){var e=t===G,r=V(e?Z:h(t)),i=[];return F(r,(function(t){!l(Y,t)||e&&!l(G,t)||i.push(Y[t])})),i};if(s||(H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=T(t),r=function(t){this===G&&r.call(Z,t),l(this,I)&&l(this[I],e)&&(this[I][e]=!1),ot(this,e,g(1,t))};return c&&nt&&ot(G,e,{configurable:!0,set:r}),at(e,t)},$(H[B],"toString",(function(){return q(this).tag})),$(H,"withoutSetter",(function(t){return at(T(t),t)})),_.f=lt,k.f=st,P.f=pt,S.f=x.f=ft,w.f=mt,R.f=function(t){return at(N(t),t)},c&&(U(H[B],"description",{configurable:!0,get:function(){return q(this).description}}),a||$(G,"propertyIsEnumerable",lt,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!s,sham:!s},{Symbol:H}),F(E(rt),(function(t){D(t)})),i({target:M,stat:!0,forced:!s},{for:function(t){var e=String(t);if(l(tt,e))return tt[e];var r=H(e);return tt[e]=r,et[r]=e,r},keyFor:function(t){if(!ct(t))throw TypeError(t+" is not a symbol");if(l(et,t))return et[t]},useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),i({target:"Object",stat:!0,forced:!s,sham:!c},{create:ut,defineProperty:st,defineProperties:dt,getOwnPropertyDescriptor:pt}),i({target:"Object",stat:!0,forced:!s},{getOwnPropertyNames:ft,getOwnPropertySymbols:mt}),i({target:"Object",stat:!0,forced:u((function(){w.f(1)}))},{getOwnPropertySymbols:function(t){return w.f(b(t))}}),K){var bt=!s||u((function(){var t=H();return"[null]"!=K([t])||"{}"!=K({a:t})||"{}"!=K(Object(t))}));i({target:"JSON",stat:!0,forced:bt},{stringify:function(t,e,r){var i,n=[t],o=1;while(arguments.length>o)n.push(arguments[o++]);if(i=e,(f(e)||void 0!==t)&&!ct(t))return p(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!ct(e))return e}),n[1]=e,K.apply(null,n)}})}H[B][Q]||O(H[B],Q,H[B].valueOf),J(H,M),C[I]=!0},ab13:function(t,e,r){var i=r("b622"),n=i("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[n]=!1,"/./"[t](e)}catch(i){}}return!1}},ae40:function(t,e,r){var i=r("83ab"),n=r("d039"),o=r("5135"),a=Object.defineProperty,c={},s=function(t){throw t};t.exports=function(t,e){if(o(c,t))return c[t];e||(e={});var r=[][t],d=!!o(e,"ACCESSORS")&&e.ACCESSORS,u=o(e,0)?e[0]:s,l=o(e,1)?e[1]:void 0;return c[t]=!!r&&!n((function(){if(d&&!i)return!0;var t={length:-1};d?a(t,1,{enumerable:!0,get:s}):t[1]=1,r.call(t,u,l)}))}},b727:function(t,e,r){var i=r("0366"),n=r("44ad"),o=r("7b0b"),a=r("50c4"),c=r("65f0"),s=[].push,d=function(t){var e=1==t,r=2==t,d=3==t,u=4==t,l=6==t,p=7==t,f=5==t||l;return function(m,b,h,v){for(var g,y,E=o(m),S=n(E),x=i(b,h,3),w=a(S.length),P=0,k=v||c,_=e?k(m,w):r||p?k(m,0):void 0;w>P;P++)if((f||P in S)&&(g=S[P],y=x(g,P,E),t))if(e)_[P]=y;else if(y)switch(t){case 3:return!0;case 5:return g;case 6:return P;case 2:s.call(_,g)}else switch(t){case 4:return!1;case 7:s.call(_,g)}return l?-1:d||u?u:_}};t.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6),filterOut:d(7)}},caad:function(t,e,r){"use strict";var i=r("23e7"),n=r("4d64").includes,o=r("44d2"),a=r("ae40"),c=a("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:!c},{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},d81d:function(t,e,r){"use strict";var i=r("23e7"),n=r("b727").map,o=r("1dde"),a=r("ae40"),c=o("map"),s=a("map");i({target:"Array",proto:!0,forced:!c||!s},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},e01a:function(t,e,r){"use strict";var i=r("23e7"),n=r("83ab"),o=r("da84"),a=r("5135"),c=r("861d"),s=r("9bf2").f,d=r("e893"),u=o.Symbol;if(n&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var l={},p=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof p?new u(t):void 0===t?u():u(t);return""===t&&(l[e]=!0),e};d(p,u);var f=p.prototype=u.prototype;f.constructor=p;var m=f.toString,b="Symbol(test)"==String(u("test")),h=/^Symbol\((.*)\)[^)]+$/;s(f,"description",{configurable:!0,get:function(){var t=c(this)?this.valueOf():this,e=m.call(t);if(a(l,t))return"";var r=b?e.slice(7,-1):e.replace(h,"$1");return""===r?void 0:r}}),i({global:!0,forced:!0},{Symbol:p})}},e538:function(t,e,r){var i=r("b622");e.f=i},e6dc:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"products"}},[r("b-container",[r("b-row",[r("b-col",{attrs:{cols:"12"}},[r("h1",{staticClass:"text-center"},[t._v("商品上下架")]),r("b-form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[r("b-form-group",{attrs:{"label-for":"input-productid",state:t.productidState,description:"商品id","invalid-feedback":"格式不符"}},[r("b-form-input",{attrs:{id:"input-productid",type:"number",placeholder:"請輸入商品ID",state:t.productidState},model:{value:t.productid,callback:function(e){t.productid=e},expression:"productid"}})],1),r("b-form-group",{attrs:{"label-for":"input-name",state:t.nameState,description:"字不要太多","invalid-feedback":"格式不符"}},[r("b-form-input",{attrs:{id:"input-name",type:"text",placeholder:"請輸入商品名稱",state:t.nameState},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),r("img-inputer",{staticClass:"mx-auto",attrs:{placeholder:"請選擇圖片","bottom-text":"點擊或拖曳更換圖片","max-size":1024,exceedSizeText:"檔案大小不能超過",accept:"image/*"},model:{value:t.image,callback:function(e){t.image=e},expression:"image"}}),r("b-form-group",{attrs:{"label-for":"input-price",state:t.priceState,description:"商品id","invalid-feedback":"格式不符"}},[r("b-form-input",{attrs:{id:"input-productid",type:"number",placeholder:"請輸入商品價格",state:t.priceState},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}})],1),r("b-form-group",{attrs:{"label-for":"input-total",state:t.totalState,description:"商品數量","invalid-feedback":"格式不符"}},[r("b-form-input",{attrs:{id:"input-total",type:"number",placeholder:"請輸入商品數量",state:t.totalState},model:{value:t.total,callback:function(e){t.total=e},expression:"total"}})],1),r("b-form-group",{attrs:{"label-for":"input-description",state:t.descriptionState,description:"最多200個字","invalid-feedback":"格式不符"}},[r("b-form-textarea",{attrs:{id:"input-description",type:"text",placeholder:"請輸入商品說明...",state:t.descriptionState},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),r("br"),r("br"),r("b-btn",{attrs:{type:"submit",variant:"success"}},[t._v("送出")])],1)],1)],1),r("hr"),r("b-row",t._l(t.productsArray,(function(e){return r("b-col",{key:e._id,attrs:{cols:"12",md:"6"}},[r("b-card",[r("b-card-img",{attrs:{src:e.src}}),r("b-card-body",[e.edit?r("b-btn",{attrs:{variant:"danger"},on:{click:function(r){return t.cancel(e)}}},[t._v("取消")]):t._e(),e.edit?r("b-btn",{attrs:{variant:"success"},on:{click:function(r){return t.save(e)}}},[t._v("保存")]):t._e(),e.edit?t._e():r("b-btn",{attrs:{variant:"success"},on:{click:function(r){return t.edit(e)}}},[t._v("編輯")]),e.edit?t._e():r("b-btn",{attrs:{variant:"danger"},on:{click:function(r){return t.del(e,t.idx)}}},[t._v("刪除")]),r("hr"),r("table",[r("tr",[r("td",[t._v("productid")]),r("td",[e.edit?r("b-form-input",{model:{value:e.productidEdit,callback:function(r){t.$set(e,"productidEdit",r)},expression:"product.productidEdit"}}):r("div",[t._v(t._s(e.productidPresent))])],1)]),r("tr",[r("td",[t._v("name")]),r("td",[e.edit?r("b-form-input",{model:{value:e.nameEdit,callback:function(r){t.$set(e,"nameEdit",r)},expression:"product.nameEdit"}}):r("div",[t._v(t._s(e.namePresent))])],1)]),r("tr",[r("td",[t._v("price")]),r("td",[e.edit?r("b-form-input",{model:{value:e.priceEdit,callback:function(r){t.$set(e,"priceEdit",r)},expression:"product.priceEdit"}}):r("div",[t._v(t._s(e.pricePresent))])],1)]),r("tr",[r("td",[t._v("total")]),r("td",[e.edit?r("b-form-input",{model:{value:e.totalEdit,callback:function(r){t.$set(e,"totalEdit",r)},expression:"product.totalEdit"}}):r("div",[t._v(t._s(e.totalPresent))])],1)]),r("tr",[r("td",[t._v("description")]),r("td",[e.edit?r("b-form-input",{model:{value:e.descriptionEdit,callback:function(r){t.$set(e,"descriptionEdit",r)},expression:"product.descriptionEdit"}}):r("div",[t._v(t._s(e.descriptionPresent))])],1)])])],1)],1)],1)})),1)],1)],1)},n=[],o=(r("a4d3"),r("e01a"),r("caad"),r("d81d"),r("a434"),r("b0c0"),r("2532"),{name:"Products",data:function(){return{productid:null,name:"",image:null,price:null,total:null,description:"",productsArray:[]}},computed:{productidState:function(){return!(this.productid<=0)&&!(this.productid>10)},nameState:function(){return 0===this.name.length?null:!(this.name.length>20)},priceState:function(){return!(this.price<=0)},totalState:function(){return!(this.total<=0)},descriptionState:function(){return 0===this.description.length?null:!(this.description.length>200)},admin:function(){return this.$store.state.admin}},methods:{onSubmit:function(){var t=this;if(this.image.size>1048576)this.$swal({icon:"error",title:"錯誤",text:"圖片太大"});else if(this.image.type.includes("image")){var e=new FormData;e.append("productid",this.productid),e.append("name",this.name),e.append("image",this.image),e.append("price",this.price),e.append("total",this.total),e.append("description",this.description),this.axios.post("https://coffeec8763.herokuapp.com/products/",e).then((function(e){e.data.success?(e.data.result.src="https://coffeec8763.herokuapp.com/products/file/"+e.data.result.file,e.data.result.productidPresent=e.data.result.productid,e.data.result.namePresent=e.data.result.name,e.data.result.pricePresent=e.data.result.price,e.data.result.totalPresent=e.data.result.total,e.data.result.descriptionPresent=e.data.result.description,e.data.result.edit=!1,e.data.result.productidEdit=e.data.result.productid,e.data.result.nameEdit=e.data.result.name,e.data.result.priceEdit=e.data.result.price,e.data.result.totalEdit=e.data.result.total,e.data.result.descriptionEdit=e.data.result.description,delete e.data.result.file,delete e.data.result.productid,delete e.data.result.name,delete e.data.result.price,delete e.data.result.total,delete e.data.result.description,t.productsArray.push(e.data.result),t.productid=null,t.name="",t.image=null,t.price=null,t.total=null,t.description=""):t.$swal({icon:"error",title:"錯誤",text:e.data.message})})).catch((function(e){t.$swal({icon:"error",title:"錯誤",text:e.response.data.message})}))}else this.$swal({icon:"error",title:"錯誤",text:"檔案格式錯誤"})},cancel:function(t){t.edit=!1,t.productidEdit=t.productidPresent,t.nameEdit=t.namePresent,t.priceEdit=t.pricePresent,t.totalEdit=t.totalPresent,t.descriptionEdit=t.descriptionPresent},save:function(t){var e=this;this.axios.patch("https://coffeec8763.herokuapp.com/products/"+t._id,{productid:t.productidEdit,name:t.nameEdit,price:t.priceEdit,total:t.totalEdit,description:t.descriptionEdit}).then((function(r){r.data.success?(t.edit=!1,t.productidPresent=t.productidEdit,t.namePresent=t.nameEdit,t.pricePresent=t.priceEdit,t.totalPresent=t.totalEdit,t.descriptionPresent=t.descriptionEdit):e.$swal({icon:"error",title:"錯誤",text:r.data.message})})).catch((function(t){e.$swal({icon:"error",title:"錯誤",text:t.response.data.message})}))},edit:function(t){t.edit=!0,t.productidEdit=t.productidPresent,t.nameEdit=t.namePresent,t.priceEdit=t.pricePresent,t.totalEdit=t.totalPresent,t.descriptionEdit=t.descriptionPresent},del:function(t,e){var r=this;this.axios.delete("https://coffeec8763.herokuapp.com/products/"+t._id).then((function(t){t.data.success?r.productsArray.splice(e,1):r.$swal({icon:"error",title:"錯誤",text:t.data.message})})).catch((function(t){r.$swal({icon:"error",title:"錯誤",text:t.response.data.message})}))}},mounted:function(){var t=this;this.axios.get("https://coffeec8763.herokuapp.com/products/admin/"+this.admin.id).then((function(e){e.data.success?t.productsArray=e.data.result.map((function(t){return t.src="https://coffeec8763.herokuapp.com/products/file/"+t.file,t.productidPresent=t.productid,t.namePresent=t.name,t.pricePresent=t.price,t.totalPresent=t.total,t.descriptionPresent=t.description,t.edit=!1,t.productidEdit=t.productid,t.nameEdit=t.name,t.priceEdit=t.price,t.totalEdit=t.total,t.descriptionEdit=t.description,delete t.file,delete t.productid,delete t.name,delete t.price,delete t.total,delete t.description,t})):t.$swal({icon:"error",title:"錯誤",text:e.data.message})})).catch((function(e){t.$swal({icon:"error",title:"錯誤",text:e.response.data.message})}))}}),a=o,c=r("2877"),s=Object(c["a"])(a,i,n,!1,null,"5b061702",null);e["default"]=s.exports},e8b5:function(t,e,r){var i=r("c6b6");t.exports=Array.isArray||function(t){return"Array"==i(t)}}}]);
//# sourceMappingURL=products.fc789a94.js.map